import{r,j as e,S as D,t as L,L as M}from"./app-T4LLqA-o.js";import{C as _,A as P}from"./AuthenticatedLayout-W9j6D9_f.js";import{T as F,a as A,b as x,c as u}from"./tabs-gRfUL5MW.js";import z from"./ShowDetails-DyGTP1PM.js";import{u as I,f as p,g as K,a as B,b as H,c as E,A as n}from"./index-BIKFZcTz.js";import{B as i,f as h,c as U}from"./button-4Fnn4Zm4.js";import{C as q}from"./checkbox-Cf03ZzJd.js";import{I as G}from"./input-BMxBlm1B.js";import{T as J,a as O,b as c,c as Q,d as W,e as j}from"./table-ABrmXgbZ.js";import{B as X}from"./badge-CU5SmAu2.js";import{L as f}from"./label-D3IoOerA.js";import{ShowCreateLicenseDialog as Y}from"./ShowCreateLicenseDialog-BHkhhzBB.js";import{T as Z,a as $,b as ee,c as se}from"./tooltip-DlQOMeEv.js";import{L as te}from"./loader-circle-Dv8pZFu_.js";import{C as ae}from"./clipboard-CeRIXNFs.js";import"./index-CXv7NyPn.js";import"./index-DZ0ENFeq.js";import"./index-C2Ig1X1a.js";import"./index-Bio6E3Lq.js";import"./index-CDe0qDmA.js";import"./index-Ch3D5kJo.js";import"./index-DFM74O4U.js";import"./createLucideIcon-Del2cXXK.js";import"./check-B8Ujda_Q.js";import"./x-D_uMpEYG.js";import"./package-D_1Nrbb4.js";import"./index-BdR1ZkQo.js";import"./form-QYiQPYc4.js";import"./card-y6lGfkX7.js";import"./select-D7m0JN0b.js";import"./index-CKKOyhDv.js";import"./index-b-i2_jtq.js";import"./chevron-down-DcCCAuOU.js";import"./alert-dialog-6iVyIj-j.js";import"./copy-CWWCiqA8.js";import"./eye-Vd38AhbY.js";import"./trash-DtDiSv9s.js";import"./dialog-CArG7EL7.js";import"./switch-BpKqDfYz.js";import"./plus-f1ARs8iQ.js";import"./sticky-note-CYAZ9r0B.js";import"./layers-D1Hfan3E.js";function ie({application:l,licenses:o}){var m,g;const d=[{id:"select",header:({table:s})=>e.jsx("div",{}),cell:({row:s})=>e.jsx("div",{className:"flex items-center ml-2",children:e.jsx(q,{checked:s.getIsSelected(),onCheckedChange:t=>s.toggleSelected(!!t),"aria-label":"Select row"})}),enableSorting:!1,enableHiding:!1},{accessorKey:"license_key",header:({column:s})=>e.jsx("div",{children:"License Key"}),cell:({row:s})=>e.jsxs("div",{className:" flex flex-row items-center gap-2",children:[e.jsx(Z,{delayDuration:0,children:e.jsxs($,{children:[e.jsx(ee,{asChild:!0,children:e.jsx(i,{variant:"ghost",className:"size-8 text-indigo-800",onClick:()=>k(s.getValue("license_key")),children:e.jsx(ae,{})})}),e.jsx(se,{className:"px-2 py-1 text-xs",children:"Copy to clipboard"})]})}),e.jsx(f,{className:"lowercase",children:s.getValue("license_key")})]})},{accessorKey:"app_name",header:({column:s})=>e.jsx("div",{children:"Application"}),cell:({row:s})=>e.jsx("div",{className:" flex flex-row items-center gap-2",children:e.jsx(f,{className:"lowercase",children:s.getValue("app_name")})})},{accessorKey:"duration",header:({column:s})=>e.jsxs(i,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:[e.jsx(n,{}),"Duration"]}),cell:({row:s})=>e.jsx("div",{className:"lowercase",children:h(s.getValue("duration"))})},{accessorKey:"expiry_date",header:({column:s})=>e.jsxs(i,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:[e.jsx(n,{}),"Time Left"]}),cell:({row:s})=>{if(s.getValue("status")==="unused")return e.jsx("div",{children:"N/A"});const t=new Date(s.getValue("expiry_date")),R=new Date,V=t.getTime()-R.getTime();return e.jsx("div",{className:"lowercase",children:h(V)})}},{accessorKey:"note",header:({column:s})=>e.jsx("div",{children:"Note"}),cell:({row:s})=>e.jsx("div",{className:"lowercase",children:s.getValue("note")})},{accessorKey:"status",header:({column:s})=>e.jsxs(i,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:[e.jsx(n,{}),"Status"]}),cell:({row:s})=>e.jsx(X,{className:U("capitalize w-20 flex flex-row justify-center items-center gap-1",s.getValue("status")==="unused"&&"badge-success",s.getValue("status")==="active"&&"badge-primary",s.getValue("status")==="expired"&&"badge-danger",s.original.revoked==="1"&&"badge-danger"),children:s.original.revoked==="1"?"Revoked":s.getValue("status")})},{id:"actions",enableHiding:!1,cell:({row:s})=>e.jsx("div",{className:"flex justify-end",children:e.jsx(_,{className:"text-zinc-600"})})}],[v,b]=r.useState([]),[C,w]=r.useState([]),[N,S]=r.useState({}),[y,T]=r.useState({}),a=I({data:o||[],columns:d,onSortingChange:b,onColumnFiltersChange:w,getCoreRowModel:E(),getPaginationRowModel:H(),getSortedRowModel:B(),getFilteredRowModel:K(),onColumnVisibilityChange:S,onRowSelectionChange:T,state:{sorting:v,columnFilters:C,columnVisibility:N,rowSelection:y}}),k=s=>{navigator.clipboard.writeText(s)};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center py-4 gap-4",children:[e.jsx(Y,{application:l}),e.jsx(G,{placeholder:"Search...",value:((m=a.getColumn("license_key"))==null?void 0:m.getFilterValue())??"",onChange:s=>{var t;return(t=a.getColumn("license_key"))==null?void 0:t.setFilterValue(s.target.value)},className:"max-w-sm"})]}),e.jsx("div",{className:"bg-zinc-950 rounded-md border",children:e.jsxs(J,{children:[e.jsx(O,{children:a.getHeaderGroups().map(s=>e.jsx(c,{children:s.headers.map(t=>e.jsx(Q,{children:t.isPlaceholder?null:p(t.column.columnDef.header,t.getContext())},t.id))},s.id))}),e.jsx(W,{children:(g=a.getRowModel().rows)!=null&&g.length?a.getRowModel().rows.map(s=>e.jsx(c,{"data-state":s.getIsSelected()&&"selected",className:"cursor-pointer",onClick:()=>D.visit(route("licenses.show",s.original.id)),children:s.getVisibleCells().map(t=>e.jsx(j,{children:p(t.column.columnDef.cell,t.getContext())},t.id))},s.id)):e.jsx(c,{children:e.jsx(j,{colSpan:d.length,className:"h-24 text-center",children:e.jsx(L,{data:"licenses",fallback:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(te,{className:"animate-spin text-indigo-700",size:32})}),children:"No results."})})})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:[a.getFilteredSelectedRowModel().rows.length," of"," ",a.getFilteredRowModel().rows.length," row(s) selected."]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>a.previousPage(),disabled:!a.getCanPreviousPage(),children:"Previous"}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>a.nextPage(),disabled:!a.getCanNextPage(),children:"Next"})]})]})]})}function Oe({application:l,licenses:o}){return e.jsxs(P,{children:[e.jsx(M,{title:"Application Detail"}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Application Detail"})}),e.jsxs(F,{defaultValue:"details",className:"w-full",children:[e.jsxs(A,{className:"grid w-full grid-cols-2",children:[e.jsx(x,{value:"details",children:"Details"}),e.jsx(x,{value:"licenses",children:"Licenses"})]}),e.jsx(u,{value:"details",children:e.jsx(z,{application:l})}),e.jsx(u,{value:"licenses",children:e.jsx(ie,{application:l,licenses:o})})]})]})]})}export{Oe as default};
