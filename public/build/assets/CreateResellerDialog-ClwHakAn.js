import{K as F,r as i,j as e,S as E}from"./app-4OTGGRcX.js";import{u as v,s as D,F as N,a as l,b as c,c as d,d as m,e as u,o as R,g as p}from"./form-9h9j0oLg.js";import{V as x}from"./index-D9qg-gZZ.js";import{B as j,g as S,t as h}from"./button-CL0-rTXa.js";import{D as P,a as L,b as T,c as z,d as k,e as I}from"./dialog-C_SSr3JO.js";import{I as f}from"./input-BibZOjCS.js";import{P as g}from"./plus-D_d1l4nx.js";import{R as U}from"./refresh-ccw-C_U88jdi.js";import{L as V}from"./loader-circle-CQr58E18.js";import"./label-C9muJG0t.js";import"./index-3LH4pK_h.js";import"./x-DHEMgt2R.js";import"./createLucideIcon-0tCQbCtX.js";const A=R({name:p().min(6).max(24).regex(/^[a-zA-Z0-9]+$/,"Username must be alphanumeric"),password:p().min(8).max(64)});function X(){const o=F().props.auth.user,b=o==null?void 0:o.all_permissions.includes("RESELLER_CREATE"),[y,a]=i.useState(!1),[t,n]=i.useState(!1),r=v({resolver:D(A)}),w=async s=>{n(!0),E.post(route("users.storeReseller"),s,{onError:()=>{x.error("Error creating user",{style:h})},onSuccess:()=>{x.success("User created",{style:h}),a(!1)},onFinish:()=>n(!1)})},C=()=>{const s=S();r.setValue("password",s)};return e.jsxs(P,{open:y,onOpenChange:a,children:[e.jsx(L,{asChild:!0,children:e.jsxs(j,{className:"btn-primary hover:bg-indigo-700",disabled:!b,children:[e.jsx(g,{}),"New reseller"]})}),e.jsxs(T,{className:"bg-zinc-950 border border-zinc-900",children:[e.jsxs(z,{children:[e.jsx(k,{children:"Create new reseller"}),e.jsx(I,{})]}),e.jsx(N,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(w),className:"flex flex-col gap-4",children:[e.jsx(l,{control:r.control,name:"name",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Username *"}),e.jsx(m,{children:e.jsx(f,{placeholder:"Enter a username",type:"text",...s})}),e.jsx(u,{})]})}),e.jsx(l,{control:r.control,name:"password",render:({field:s})=>e.jsxs(c,{children:[e.jsx(d,{children:"Password *"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:"pe-9",placeholder:"Enter a password",...s}),e.jsx("button",{type:"button",className:"absolute inset-y-0 end-0 flex h-full w-9 items-center justify-center rounded-e-lg border border-transparent text-muted-foreground/80 outline-offset-2 transition-colors hover:text-foreground focus-visible:outline focus-visible:outline-2 focus-visible:outline-ring/70 disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50",onClick:C,children:e.jsx(U,{size:16,strokeWidth:2,"aria-hidden":"true"})})]})}),e.jsx(u,{})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(j,{type:"submit",className:"btn-primary",disabled:t,children:t?e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"animate-spin"}),"Creating user..."]}):e.jsxs(e.Fragment,{children:[e.jsx(g,{})," Create user"]})})})]})})]})]})}export{X as CreateResellerDialog};
