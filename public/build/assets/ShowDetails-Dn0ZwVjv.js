import{K as $,r as l,j as e,A as T,S as _}from"./app-BTBLTgKa.js";import{u as G,F as J,a as h,b as m,c as j,d as p,e as f,f as Q,s as W,o as Y,g as y}from"./form-Ewck4cr5.js";import{V as o}from"./index-C0Aybrov.js";import{C as k,a as E,b as F,c as L,d as z}from"./card-CUhwYfK6.js";import{I as d,L as b}from"./input-DPBk8N_M.js";import{b as H,B as c,a as P,t as x}from"./createLucideIcon-Dk4g4Rfc.js";import{S as Z,a as ee,b as se,c as ae,d as g}from"./select-D13dZe9U.js";import{L as R}from"./label-8Biq_GbJ.js";import{T as re,a as te,b as le,c as ie}from"./tooltip-Csbz7HmR.js";import{A as ne,a as oe,b as de,c as ce,d as xe,e as ue,f as he,g as me}from"./alert-dialog-gwaJx6Ol.js";import{C as V}from"./check-DyFLvgFN.js";import{C as je}from"./copy-4ijbWcKp.js";import{E as pe,a as fe}from"./eye-lmOLiwl8.js";import{T as I}from"./trash-CPK-TJTn.js";import{X as ye}from"./x-Dpj60ZH6.js";import"./index-Uk3LIZDJ.js";import"./index-DuTKQBgG.js";import"./index-cyAClCp9.js";import"./index-9Zp9f-9W.js";import"./index-DqEWQkQn.js";import"./index-CycH6tgb.js";/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],ge=H("Hash",be);/**
 * @license lucide-react v0.476.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Ce=H("RotateCw",ve),we=Y({name:y(),status:y().min(0),download_url:y().optional().nullable()});function Ke({application:s}){const r=$().props.auth.user,[v,C]=l.useState(!1),[w,D]=l.useState(!1),[i,N]=l.useState(!1),u=l.useRef(null),[n,M]=l.useState(!1),S=r==null?void 0:r.all_permissions.includes("APPS_UPDATE"),U=r==null?void 0:r.all_permissions.includes("APPS_DELETE"),t=G({resolver:W(we)});l.useEffect(()=>{s&&t.reset({name:s==null?void 0:s.name,status:s==null?void 0:s.status,download_url:s==null?void 0:s.download_url})},[s]);const O=()=>{u.current&&(navigator.clipboard.writeText(u.current.value),N(!0),setTimeout(()=>N(!1),1500))},B=()=>M(a=>!a),q=async a=>{C(!0),_.put(route("applications.update",s.id),a,{onError:()=>{o.error("Error updating application",{style:x})},onSuccess:()=>{o.success("Application updated",{style:x})},onFinish:()=>C(!1)})},K=()=>{D(!0),_.delete(route("applications.delete",s.id),{onError:()=>{o.error("Error deleting application",{style:x})},onSuccess:()=>{o.success("Application deleted",{style:x})},onFinish:()=>D(!1)})},A=()=>e.jsx("div",{className:"flex justify-center items-center space-x-2 pb-6",children:e.jsx(b,{className:"animate-spin text-indigo-600",size:36})}),X=()=>e.jsxs(ne,{children:[e.jsx(oe,{asChild:!0,children:e.jsxs(c,{variant:"ghost",className:"text-red-900",type:"button",disabled:w||!U,children:[w?e.jsx(b,{className:"animate-spin"}):e.jsx(I,{}),"Delete application"]})}),e.jsxs(de,{children:[e.jsxs(ce,{children:[e.jsx(xe,{children:"Delete application?"}),e.jsx(ue,{children:"Are you sure you want to delete this application? This action will delete all asociated licenses and cannot be undone."})]}),e.jsxs(he,{children:[e.jsxs(me,{children:[e.jsx(ye,{}),"Cancel"]}),e.jsxs(c,{variant:"destructive",onClick:K,children:[e.jsx(I,{}),"Delete"]})]})]})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(k,{children:[e.jsxs(E,{children:[e.jsx(F,{children:"Application details"}),e.jsx(L,{children:"Manage your application details"})]}),e.jsx(z,{children:e.jsx(T,{data:"application",fallback:e.jsx(A,{}),children:e.jsx(J,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(q),className:"flex flex-col gap-2",children:[e.jsx(h,{control:t.control,name:"name",render:({field:a})=>e.jsxs(m,{children:[e.jsx(j,{children:"App name"}),e.jsx(p,{children:e.jsx(d,{placeholder:"Enter your application name",type:"text",...a})}),e.jsx(f,{})]})}),e.jsx(h,{control:t.control,name:"status",render:({field:a})=>e.jsxs(m,{children:[e.jsx(j,{children:"Status"}),e.jsxs(Z,{onValueChange:a.onChange,defaultValue:a.value,children:[e.jsx(p,{children:e.jsx(ee,{children:e.jsx(se,{placeholder:"Select a status"})})}),e.jsxs(ae,{children:[e.jsx(g,{value:"available",children:"Available"}),e.jsx(g,{value:"unavailable",children:"Unavailable"}),e.jsx(g,{value:"hidden",children:"Hidden"})]})]}),e.jsx(f,{})]})}),e.jsx(h,{control:t.control,name:"download_url",render:({field:a})=>e.jsxs(m,{children:[e.jsx(j,{children:"Download URL"}),e.jsx(p,{children:e.jsx(d,{placeholder:"https://example.net/downloads/release.zip",type:"text",...a})}),e.jsx(Q,{children:"(Optional) Download URL for launchers"}),e.jsx(f,{})]})}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsx(X,{}),e.jsx(c,{type:"submit",className:"btn-primary",disabled:v||!S,children:v?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"animate-spin"}),"Saving changes..."]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{})," Save changes"]})})]})]})})})})]}),e.jsxs(k,{children:[e.jsxs(E,{children:[e.jsx(F,{children:"Application credentials"}),e.jsx(L,{children:"Manage your application credentials"})]}),e.jsx(z,{children:e.jsx(T,{data:"application",fallback:e.jsx(A,{}),children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(R,{children:"App ID"}),e.jsxs("div",{className:"relative",children:[e.jsx(d,{ref:u,className:"peer ps-9",readOnly:!0,value:s==null?void 0:s.app_hash_id}),e.jsx("div",{className:"text-muted-foreground/80 pointer-events-none absolute inset-y-0 start-0 flex items-center justify-center ps-3 peer-disabled:opacity-50",children:e.jsx(ge,{size:16,"aria-hidden":"true"})}),e.jsx(re,{delayDuration:0,children:e.jsxs(te,{children:[e.jsx(le,{asChild:!0,children:e.jsxs("button",{onClick:O,className:"text-muted-foreground/80 hover:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 absolute inset-y-0 end-0 flex h-full w-9 items-center justify-center rounded-e-md transition-[color,box-shadow] outline-none focus:z-10 focus-visible:ring-[3px] disabled:pointer-events-none disabled:cursor-not-allowed","aria-label":i?"Copied":"Copy to clipboard",disabled:i,children:[e.jsx("div",{className:P("transition-all",i?"scale-100 opacity-100":"scale-0 opacity-0"),children:e.jsx(V,{className:"stroke-emerald-500",size:16,"aria-hidden":"true"})}),e.jsx("div",{className:P("absolute transition-all",i?"scale-0 opacity-0":"scale-100 opacity-100"),children:e.jsx(je,{size:16,"aria-hidden":"true"})})]})}),e.jsx(ie,{className:"px-2 py-1 text-xs",children:"Copy to clipboard"})]})})]})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx(R,{children:"App Secret"}),e.jsxs("div",{className:"flex flex-row gap-3",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx(d,{readOnly:!0,value:s==null?void 0:s.app_hash_id,className:"pe-9",type:n?"text":"password"}),e.jsx("button",{className:"text-muted-foreground/80 hover:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 absolute inset-y-0 end-0 flex h-full w-9 items-center justify-center rounded-e-md transition-[color,box-shadow] outline-none focus:z-10 focus-visible:ring-[3px] disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50",type:"button",onClick:B,"aria-label":n?"Hide password":"Show password","aria-pressed":n,"aria-controls":"password",children:n?e.jsx(pe,{size:16,"aria-hidden":"true"}):e.jsx(fe,{size:16,"aria-hidden":"true"})})]}),e.jsxs(c,{className:"btn-primary",disabled:!S,children:[e.jsx(Ce,{size:16,"aria-hidden":"true"}),"Renew"]})]})]})]})})})]})]})}export{Ke as default};
