import{r as l,j as e,S as L,t as _,L as P}from"./app-Dolgd4iM.js";import{u as I,f as p,g as D,a as F,b as K,c as z,A as c}from"./index-B5kvMLuU.js";import{B as i,f as h,c as A}from"./button-D0ClRWu4.js";import{C as B}from"./checkbox-BaNEC8wb.js";import{I as H}from"./input-DSgG9jbb.js";import{T as E,a as U,b as d,c as q,d as G,e as j}from"./table-lNXWzKO5.js";import{B as J}from"./badge-St2D--jT.js";import{L as f}from"./label-_Jex7M9b.js";import{T as O,a as Q,b as W,c as X}from"./tooltip-RvcGQB0T.js";import{IndexCreateLicenseDialog as Y}from"./IndexCreateLicenseDialog-BIjba9-M.js";import{L as Z}from"./loader-circle-C8BvkExV.js";import{C as $}from"./circle-check-big-Bgt2apVb.js";import{C as ee}from"./clipboard-D5sVYZBW.js";import{C as se,A as te}from"./AuthenticatedLayout-DO-ZyPWM.js";import"./createLucideIcon-BnrLvxL-.js";import"./index-C_F-sgyr.js";import"./index-BT6SQ-2-.js";import"./index-C13PvmDz.js";import"./index-C9uZe4dc.js";import"./check-Cur-CPmi.js";import"./index-Dit_NJU4.js";import"./index-BeD3hcVn.js";import"./index-DmtAJDj3.js";import"./form-CN2RbSsa.js";import"./index-CUV3Owv5.js";import"./dialog-1CHXOoNR.js";import"./x-B5M3iq-V.js";import"./select-Cw3_0yvq.js";import"./index-Bss0tgsO.js";import"./chevron-down-C5An7sAC.js";import"./switch-BYTeKF8L.js";import"./plus-CZklbFJK.js";import"./sticky-note-DC8g0M_O.js";import"./layers-CQejcWm9.js";import"./index-BHIaToBe.js";import"./package-C8J_lC1A.js";function ae({licenses:r,applications:o,timeOptions:n}){var x,u;const m=[{id:"select",header:({table:s})=>e.jsx("div",{}),cell:({row:s})=>e.jsx("div",{className:"flex items-center ml-2",children:e.jsx(B,{checked:s.getIsSelected(),onCheckedChange:t=>s.toggleSelected(!!t),"aria-label":"Select row"})}),enableSorting:!1,enableHiding:!1},{accessorKey:"license_key",header:({column:s})=>e.jsx("div",{children:"License Key"}),cell:({row:s})=>e.jsxs("div",{className:"flex flex-row items-center gap-2 max-w-lg",onClick:t=>t.stopPropagation(),children:[e.jsx(O,{delayDuration:0,children:e.jsxs(Q,{children:[e.jsx(W,{asChild:!0,children:e.jsxs(i,{variant:"ghost",onClick:()=>R(s.getValue("license_key")),className:"h-4 w-4 text-indigo-50",children:[C?e.jsx($,{}):e.jsx(ee,{}),e.jsx("span",{className:"sr-only",children:"Copy license key"})]})}),e.jsx(X,{className:"px-2 py-1 text-xs",children:"Copy to clipboard"})]})}),e.jsx(f,{className:"lowercase cursor-text",children:s.getValue("license_key")})]})},{accessorKey:"app_name",header:({column:s})=>e.jsx("div",{children:"Application"}),cell:({row:s})=>e.jsx("div",{className:" flex flex-row items-center gap-2",children:e.jsx(f,{className:"lowercase",children:s.getValue("app_name")})})},{accessorKey:"duration",header:({column:s})=>e.jsxs(i,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:[e.jsx(c,{}),"Duration"]}),cell:({row:s})=>e.jsx("div",{className:"lowercase",children:h(s.getValue("duration"))})},{accessorKey:"expiry_date",header:({column:s})=>e.jsxs(i,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:[e.jsx(c,{}),"Time Left"]}),cell:({row:s})=>{if(s.getValue("status")==="unused")return e.jsx("div",{children:"N/A"});const t=new Date(s.getValue("expiry_date")),V=new Date,M=t.getTime()-V.getTime();return e.jsx("div",{className:"lowercase",children:h(M)})}},{accessorKey:"note",header:({column:s})=>e.jsx("div",{children:"Note"}),cell:({row:s})=>e.jsx("div",{className:"lowercase",children:s.getValue("note")})},{accessorKey:"status",header:({column:s})=>e.jsxs(i,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:[e.jsx(c,{}),"Status"]}),cell:({row:s})=>e.jsx(J,{className:A("capitalize w-20 flex flex-row justify-center items-center gap-1",s.getValue("status")==="unused"&&"badge-success",s.getValue("status")==="active"&&"badge-primary",s.getValue("status")==="expired"&&"badge-danger",s.original.revoked==="1"&&"badge-danger"),children:s.original.revoked==="1"?"Revoked":s.getValue("status")})},{id:"actions",enableHiding:!1,cell:({row:s})=>e.jsx("div",{className:"flex justify-end",children:e.jsx(se,{className:"text-zinc-600"})})}],[C,g]=l.useState(!1),[v,b]=l.useState([]),[y,N]=l.useState([]),[w,S]=l.useState({}),[k,T]=l.useState({}),a=I({data:r||[],columns:m,onSortingChange:b,onColumnFiltersChange:N,getCoreRowModel:z(),getPaginationRowModel:K(),getSortedRowModel:F(),getFilteredRowModel:D(),onColumnVisibilityChange:S,onRowSelectionChange:T,state:{sorting:v,columnFilters:y,columnVisibility:w,rowSelection:k}}),R=s=>{navigator.clipboard.writeText(s),g(!0),setTimeout(()=>g(!1),2e3)};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center py-4 gap-4",children:[e.jsx(Y,{applications:o,timeOptions:n}),e.jsx(H,{placeholder:"Search...",value:((x=a.getColumn("license_key"))==null?void 0:x.getFilterValue())??"",onChange:s=>{var t;return(t=a.getColumn("license_key"))==null?void 0:t.setFilterValue(s.target.value)},className:"max-w-sm"})]}),e.jsx("div",{className:"bg-zinc-950 rounded-md border",children:e.jsxs(E,{children:[e.jsx(U,{children:a.getHeaderGroups().map(s=>e.jsx(d,{children:s.headers.map(t=>e.jsx(q,{children:t.isPlaceholder?null:p(t.column.columnDef.header,t.getContext())},t.id))},s.id))}),e.jsx(G,{children:(u=a.getRowModel().rows)!=null&&u.length?a.getRowModel().rows.map(s=>e.jsx(d,{"data-state":s.getIsSelected()&&"selected",className:"cursor-pointer",onClick:()=>L.visit(route("licenses.show",s.original.id)),children:s.getVisibleCells().map(t=>e.jsx(j,{children:p(t.column.columnDef.cell,t.getContext())},t.id))},s.id)):e.jsx(d,{children:e.jsx(j,{colSpan:m.length,className:"h-24 text-center",children:e.jsx(_,{data:"licenses",fallback:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(Z,{className:"animate-spin text-indigo-700",size:32})}),children:"No results."})})})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:[a.getFilteredSelectedRowModel().rows.length," of"," ",a.getFilteredRowModel().rows.length," row(s) selected."]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>a.previousPage(),disabled:!a.getCanPreviousPage(),children:"Previous"}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>a.nextPage(),disabled:!a.getCanNextPage(),children:"Next"})]})]})]})}function Be({licenses:r,applications:o,timeOptions:n}){return e.jsxs(te,{children:[e.jsx(P,{title:"Licenses Management"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Licenses Management"}),e.jsx("p",{className:"text-muted-foreground",children:"View and manage your licenses"})]}),e.jsx(ae,{licenses:r,applications:o,timeOptions:n})]})]})}export{Be as default};
