import{K as R,R as n,j as e,$ as y,S as M,A as V,L as P}from"./app-BHZZGGVZ.js";import{u as A,f as x,g as _,a as k,b as z,c as T,A as o}from"./index-B8lrMHox.js";import{B as l,c as F}from"./button-XErBiDGe.js";import{I}from"./input-C60M-DiU.js";import{T as K,a as B,b as c,c as L,d as D,e as p}from"./table-ARFlYC-p.js";import{B as H}from"./badge-CHDSiBGe.js";import{P as E}from"./plus-C79cE1Db.js";import{L as $}from"./loader-circle-DzOOGpQo.js";import{C as U,A as q}from"./AuthenticatedLayout-CUhmD6s9.js";import"./createLucideIcon-CUEObJYx.js";import"./index-COmpnzPA.js";import"./index-D-l8TfoB.js";import"./index-CsMFtBbr.js";import"./index-BqkqwqH4.js";import"./index-CibRDUcS.js";import"./index-CWuNTcQY.js";import"./check-CtamEQoW.js";import"./x-CesM0Kvh.js";import"./package-DXuTeNxG.js";function G({applications:r}){var g,m;const d=[{accessorKey:"name",header:({column:s})=>e.jsxs(l,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:[e.jsx(o,{}),"Name"]}),cell:({row:s})=>e.jsx("div",{className:"capitalize text-zinc-200",children:s.getValue("name")})},{accessorKey:"app_hash_id",header:({column:s})=>e.jsxs(l,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:[e.jsx(o,{}),"App ID"]}),cell:({row:s})=>e.jsx("div",{className:"text-zinc-200",children:s.getValue("app_hash_id")})},{accessorKey:"license_count",header:({column:s})=>e.jsxs(l,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:[e.jsx(o,{}),"Keys"]}),cell:({row:s})=>e.jsxs("div",{className:"lowercase text-zinc-200",children:[s.getValue("license_count")," keys"]})},{accessorKey:"status",header:({column:s})=>e.jsxs(l,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),children:[e.jsx(o,{}),"Status"]}),cell:({row:s})=>e.jsx(H,{className:F("capitalize w-20 flex flex-row justify-center items-center gap-1",s.getValue("status")==="available"&&"badge-success",s.getValue("status")==="unavailable"&&"badge-danger",s.getValue("status")==="hidden"&&"badge-warning"),children:s.getValue("status")})},{id:"actions",enableHiding:!1,cell:({row:s})=>e.jsx("div",{className:"flex justify-end",children:e.jsx(U,{className:"text-zinc-600"})})}],t=R().props.auth.user,[u,h]=n.useState([]),[j,f]=n.useState([]),[b,C]=n.useState({}),[v,w]=n.useState({}),a=A({data:r||[],columns:d,onSortingChange:h,onColumnFiltersChange:f,getCoreRowModel:T(),getPaginationRowModel:z(),getSortedRowModel:k(),getFilteredRowModel:_(),onColumnVisibilityChange:C,onRowSelectionChange:w,state:{sorting:u,columnFilters:j,columnVisibility:b,rowSelection:v}}),S=t==null?void 0:t.all_permissions.includes("APPS_CREATE"),N=(t==null?void 0:t.application_count)>=(t==null?void 0:t.subscription.max_applications);return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center py-4 gap-4",children:[e.jsx(y,{href:route("applications.create"),children:e.jsxs(l,{disabled:!S||N,className:"btn-primary",children:[e.jsx(E,{}),"New application"," (",t==null?void 0:t.application_count,"/",t==null?void 0:t.subscription.max_applications,")"]})}),e.jsx(I,{placeholder:"Search...",value:((g=a.getColumn("name"))==null?void 0:g.getFilterValue())??"",onChange:s=>{var i;return(i=a.getColumn("name"))==null?void 0:i.setFilterValue(s.target.value)},className:"max-w-sm"})]}),e.jsx("div",{className:"bg-zinc-950 rounded-md border",children:e.jsxs(K,{children:[e.jsx(B,{children:a.getHeaderGroups().map(s=>e.jsx(c,{children:s.headers.map(i=>e.jsx(L,{children:i.isPlaceholder?null:x(i.column.columnDef.header,i.getContext())},i.id))},s.id))}),e.jsx(D,{children:(m=a.getRowModel().rows)!=null&&m.length?a.getRowModel().rows.map(s=>e.jsx(c,{"data-state":s.getIsSelected()&&"selected",className:"cursor-pointer",onClick:()=>M.visit(route("applications.show",s.original.id)),children:s.getVisibleCells().map(i=>e.jsx(p,{children:x(i.column.columnDef.cell,i.getContext())},i.id))},s.id)):e.jsx(c,{children:e.jsx(p,{colSpan:d.length,className:"h-24 text-center",children:e.jsx(V,{data:"applications",fallback:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx($,{className:"animate-spin text-indigo-700",size:32})}),children:"No results."})})})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:[a.getFilteredSelectedRowModel().rows.length," of"," ",a.getFilteredRowModel().rows.length," row(s) selected."]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>a.previousPage(),disabled:!a.getCanPreviousPage(),children:"Previous"}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>a.nextPage(),disabled:!a.getCanNextPage(),children:"Next"})]})]})]})}function me({applications:r}){return e.jsxs(q,{children:[e.jsx(P,{title:"Applications Management"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Applications Management"}),e.jsx("p",{className:"text-muted-foreground",children:"View and manage your releases"})]}),e.jsx(G,{applications:r})]})]})}export{me as default};
